\set ON_ERROR_STOP 1
CREATE DATABASE :dbname;
\c :dbname;

-- performance enhancements

ALTER DATABASE :dbname SET synchronous_commit = off;
--ALTER DATABASE :dbname SET wal_compression = on;
ALTER DATABASE :dbname SET work_mem = '4096MB';

CREATE DOMAIN frequency_map AS BYTEA CHECK (length(VALUE) = 26);

CREATE TABLE job (
	job_id		BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 100) PRIMARY KEY,
	parent_job_id	BIGINT,
	frequency_map	frequency_map NOT NULL,
	start		INTEGER,
	finished	BOOLEAN NOT NULL,
	is_sentence	BOOLEAN NOT NULL
);
-- make tables unlogged
ALTER TABLE job SET UNLOGGED;
